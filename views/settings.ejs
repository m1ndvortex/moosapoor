<div class="page-header">
    <h1 class="page-title">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</h1>
    <p>Ù…Ø¯ÛŒØ±ÛŒØª ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ùˆ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø³ÛŒØ³ØªÙ…</p>
</div>

<style>
/* RTL Support */
body {
    direction: rtl;
    text-align: right;
}
.settings-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 25px;
    margin-top: 30px;
}

.settings-card {
    background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.settings-card::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    height: 4px;
    background: linear-gradient(270deg, #ffd700, #ffb300);
}

.settings-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

.card-header {
    display: flex;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid #f0f0f0;
}

.card-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    color: white;
    font-size: 20px;
}

.card-title {
    font-size: 22px;
    font-weight: 700;
    color: #2c3e50;
    margin: 0;
}

.card-subtitle {
    font-size: 14px;
    color: #7f8c8d;
    margin: 5px 0 0 0;
}

.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #2c3e50;
    font-size: 14px;
}

.form-control {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid #e9ecef;
    border-radius: 10px;
    font-size: 14px;
    transition: all 0.3s ease;
    box-sizing: border-box;
}

.form-control:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.btn {
    padding: 12px 25px;
    border: none;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
}

.btn-success {
    background: linear-gradient(135deg, #28a745, #20c997);
    color: white;
}

.btn-success:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
}

.btn-warning {
    background: linear-gradient(135deg, #ffc107, #fd7e14);
    color: white;
}

.btn-warning:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(255, 193, 7, 0.3);
}

.btn-danger {
    background: linear-gradient(135deg, #dc3545, #e83e8c);
    color: white;
}

.btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(220, 53, 69, 0.3);
}

.backup-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
}

.backup-option {
    text-align: center;
    padding: 15px;
    border: 2px solid #e9ecef;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.backup-option:hover {
    border-color: #667eea;
    background: rgba(102, 126, 234, 0.05);
}

.backup-option.selected {
    border-color: #667eea;
    background: rgba(102, 126, 234, 0.1);
}

.backup-option i {
    font-size: 24px;
    color: #667eea;
    margin-bottom: 8px;
}

.backup-option span {
    display: block;
    font-size: 12px;
    font-weight: 600;
    color: #2c3e50;
}

.progress-container {
    display: none;
    margin-top: 20px;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: #e9ecef;
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #667eea, #764ba2);
    width: 0%;
    transition: width 0.3s ease;
}

.alert {
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 20px;
    border: none;
}

.alert-success {
    background: rgba(40, 167, 69, 0.1);
    color: #155724;
    border-right: 4px solid #28a745;
}

.alert-danger {
    background: rgba(220, 53, 69, 0.1);
    color: #721c24;
    border-right: 4px solid #dc3545;
}

.password-strength {
    margin-top: 10px;
    height: 6px;
    background: #e9ecef;
    border-radius: 3px;
    overflow: hidden;
}

.strength-bar {
    height: 100%;
    transition: all 0.3s ease;
    border-radius: 3px;
}

.strength-weak { background: #dc3545; width: 25%; }
.strength-fair { background: #ffc107; width: 50%; }
.strength-good { background: #fd7e14; width: 75%; }
.strength-strong { background: #28a745; width: 100%; }

@media (max-width: 768px) {
    .settings-container {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .settings-card {
        padding: 20px;
    }
    
    .backup-options {
        grid-template-columns: repeat(2, 1fr);
    }
}
</style>

<div class="settings-container">
    <!-- ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± -->
    <div class="settings-card">
        <div class="card-header">
            <div class="card-icon">
                <i class="fas fa-key"></i>
            </div>
            <div>
                <h3 class="card-title">ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</h3>
                <p class="card-subtitle">ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</p>
            </div>
        </div>

        <form id="changePasswordForm">
            <div class="form-group">
                <label for="currentPassword" class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ÙØ¹Ù„ÛŒ</label>
                <input type="password" id="currentPassword" name="currentPassword" class="form-control" required>
            </div>

            <div class="form-group">
                <label for="newPassword" class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯</label>
                <input type="password" id="newPassword" name="newPassword" class="form-control" required>
                <div class="password-strength">
                    <div class="strength-bar" id="strengthBar"></div>
                </div>
                <small id="strengthText" style="margin-top: 5px; display: block; color: #6c757d;"></small>
            </div>

            <div class="form-group">
                <label for="confirmPassword" class="form-label">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯</label>
                <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" required>
            </div>

            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i>
                ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
            </button>
        </form>
    </div>

    <!-- Ø¨Ú©â€ŒØ¢Ù¾ Ø³ÛŒØ³ØªÙ… -->
    <div class="settings-card">
        <div class="card-header">
            <div class="card-icon">
                <i class="fas fa-database"></i>
            </div>
            <div>
                <h3 class="card-title">Ø¨Ú©â€ŒØ¢Ù¾ Ø³ÛŒØ³ØªÙ…</h3>
                <p class="card-subtitle">Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ Ùˆ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</p>
            </div>
        </div>

        <div class="backup-options">
            <div class="backup-option selected" data-type="full">
                <i class="fas fa-database"></i>
                <span>Ø¨Ú©â€ŒØ¢Ù¾ Ú©Ø§Ù…Ù„</span>
            </div>
            <div class="backup-option" data-type="data">
                <i class="fas fa-table"></i>
                <span>ÙÙ‚Ø· Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</span>
            </div>
            <div class="backup-option" data-type="structure">
                <i class="fas fa-project-diagram"></i>
                <span>ÙÙ‚Ø· Ø³Ø§Ø®ØªØ§Ø±</span>
            </div>
        </div>

        <div class="form-group">
            <label for="backupDescription" class="form-label">ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨Ú©â€ŒØ¢Ù¾</label>
            <input type="text" id="backupDescription" class="form-control" placeholder="ØªÙˆØ¶ÛŒØ­ Ø§Ø®ØªÛŒØ§Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¨Ú©â€ŒØ¢Ù¾">
        </div>

        <button id="createBackupBtn" class="btn btn-success" style="width: 100%; margin-bottom: 15px;">
            <i class="fas fa-download"></i>
            Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ú©â€ŒØ¢Ù¾
        </button>

        <div class="progress-container" id="backupProgress">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <small style="margin-top: 5px; display: block; text-align: center;" id="progressText">Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´...</small>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
            <a href="/settings/backup/history" class="btn btn-warning">
                <i class="fas fa-history"></i>
                ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø¨Ú©â€ŒØ¢Ù¾
            </a>
            <button id="restoreBtn" class="btn btn-danger">
                <i class="fas fa-upload"></i>
                Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ
            </button>
        </div>
    </div>

    <!-- Ø¨Ø®Ø´ Ø³ÙˆÙ…: Ø§Ù…Ù†ÛŒØª Ùˆ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø³ÛŒØ³ØªÙ… -->
    <div class="settings-card">
        <div class="card-header">
            <div class="card-icon">
                <i class="fas fa-shield-alt"></i>
            </div>
            <div>
                <h3 class="card-title">Ø§Ù…Ù†ÛŒØª Ùˆ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø³ÛŒØ³ØªÙ…</h3>
                <p class="card-subtitle">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ Ùˆ Ù†Ø¸Ø§Ø±Øª Ø¨Ø± Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø³ÛŒØ³ØªÙ…</p>
            </div>
        </div>

        <div class="section-content">
            <!-- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¬Ù„Ø³Ù‡ Ú©Ø§Ø±ÛŒ -->
            <div class="form-group">
                <label for="sessionTimeout">Ù…Ø¯Øª Ø§Ø¹ØªØ¨Ø§Ø± Ø¬Ù„Ø³Ù‡ Ú©Ø§Ø±ÛŒ (Ø¯Ù‚ÛŒÙ‚Ù‡):</label>
                <select id="sessionTimeout" class="form-control">
                    <option value="30">30 Ø¯Ù‚ÛŒÙ‚Ù‡</option>
                    <option value="60" selected>1 Ø³Ø§Ø¹Øª</option>
                    <option value="120">2 Ø³Ø§Ø¹Øª</option>
                    <option value="240">4 Ø³Ø§Ø¹Øª</option>
                    <option value="480">8 Ø³Ø§Ø¹Øª</option>
                </select>
                <small class="form-text text-muted">Ù¾Ø³ Ø§Ø² Ø§ÛŒÙ† Ù…Ø¯ØªØŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ÛŒØ¯ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ÙˆØ§Ø±Ø¯ Ø´ÙˆØ¯</small>
            </div>

            <!-- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ú©â€ŒØ¢Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø± -->
            <div class="form-group">
                <label for="autoBackupInterval">Ø¨Ú©â€ŒØ¢Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø±:</label>
                <select id="autoBackupInterval" class="form-control">
                    <option value="disabled">ØºÛŒØ±ÙØ¹Ø§Ù„</option>
                    <option value="daily" selected>Ø±ÙˆØ²Ø§Ù†Ù‡</option>
                    <option value="weekly">Ù‡ÙØªÚ¯ÛŒ</option>
                    <option value="monthly">Ù…Ø§Ù‡Ø§Ù†Ù‡</option>
                </select>
                <small class="form-text text-muted">Ø¨Ú©â€ŒØ¢Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ø± Ø´Ø¨ Ø³Ø§Ø¹Øª 2:00 ØµØ¨Ø­ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯</small>
            </div>

            <!-- Ø­Ø¯Ø§Ú©Ø«Ø± ØªØ¹Ø¯Ø§Ø¯ Ø¨Ú©â€ŒØ¢Ù¾ -->
            <div class="form-group">
                <label for="maxBackups">Ø­Ø¯Ø§Ú©Ø«Ø± ØªØ¹Ø¯Ø§Ø¯ Ø¨Ú©â€ŒØ¢Ù¾ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ:</label>
                <select id="maxBackups" class="form-control">
                    <option value="5">5 ÙØ§ÛŒÙ„</option>
                    <option value="10" selected>10 ÙØ§ÛŒÙ„</option>
                    <option value="20">20 ÙØ§ÛŒÙ„</option>
                    <option value="50">50 ÙØ§ÛŒÙ„</option>
                </select>
                <small class="form-text text-muted">ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</small>
            </div>

            <!-- Ø¢Ù…Ø§Ø± Ø³ÛŒØ³ØªÙ… -->
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="info-card">
                        <div class="info-title">ÙˆØ¶Ø¹ÛŒØª Ø¯ÛŒØªØ§Ø¨ÛŒØ³</div>
                        <div class="info-value" id="dbStatus">âœ… Ù…ØªØµÙ„ Ùˆ Ø³Ø§Ù„Ù…</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="info-card">
                        <div class="info-title">Ø­Ø¬Ù… Ø¯ÛŒØªØ§Ø¨ÛŒØ³</div>
                        <div class="info-value" id="dbSize">ğŸ“Š Ø¯Ø± Ø­Ø§Ù„ Ù…Ø­Ø§Ø³Ø¨Ù‡...</div>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-md-6">
                    <div class="info-card">
                        <div class="info-title">Ø¢Ø®Ø±ÛŒÙ† Ø¨Ú©â€ŒØ¢Ù¾</div>
                        <div class="info-value" id="lastBackup">ğŸ• Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="info-card">
                        <div class="info-title">Ø¢Ø®Ø±ÛŒÙ† ÙˆØ±ÙˆØ¯</div>
                        <div class="info-value" id="lastLogin">ğŸ‘¤ Ø§Ù„Ø§Ù†</div>
                    </div>
                </div>
            </div>

            <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ -->
            <div class="form-actions mt-4">
                <button type="button" onclick="clearSystemCache()" class="btn btn-warning">
                    ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ø´ Ø³ÛŒØ³ØªÙ…
                </button>
                <button type="button" onclick="checkSystemHealth()" class="btn btn-info">
                    ğŸ” Ø¨Ø±Ø±Ø³ÛŒ Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…
                </button>
                <button type="button" onclick="optimizeDatabase()" class="btn btn-success">
                    âš¡ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
                </button>
            </div>

            <div class="save-section">
                <button type="button" onclick="saveSecuritySettings()" class="btn btn-primary btn-lg">
                    ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ
                </button>
            </div>
        </div>
    </div>

    <!-- Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø§ÛŒ ØªØ­ÙˆÛŒÙ„ -->
    <div class="settings-card">
        <div class="card-header">
            <div class="card-icon" style="background: linear-gradient(135deg, #dc3545, #e83e8c);">
                <i class="fas fa-broom"></i>
            </div>
            <div>
                <h3 class="card-title">Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø§ÛŒ ØªØ­ÙˆÛŒÙ„</h3>
                <p class="card-subtitle">Ø­Ø°Ù ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø§ÛŒ ØªØ­ÙˆÛŒÙ„ Ø³ÛŒØ³ØªÙ… Ø®Ø§Ù… Ø¨Ù‡ Ù…Ø´ØªØ±ÛŒ</p>
            </div>
        </div>

        <div class="section-content">
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-triangle"></i>
                <strong>Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø­Ø±Ø§Ù†ÛŒ:</strong> Ø§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø²ÛŒØ± Ø±Ø§ Ø­Ø°Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯:
                <ul style="margin-top: 10px;">
                    <li>ØªÙ…Ø§Ù… Ù…Ø´ØªØ±ÛŒØ§Ù† Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ù†â€ŒÙ‡Ø§</li>
                    <li>Ú©Ù„ÛŒÙ‡ Ú©Ø§Ù„Ø§Ù‡Ø§ Ùˆ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø§Ù†Ø¨Ø§Ø±</li>
                    <li>ÙØ§Ú©ØªÙˆØ±Ù‡Ø§ Ùˆ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù„ÛŒ</li>
                    <li>Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ùˆ Ø¢Ù…Ø§Ø±</li>
                    <li>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</li>
                </ul>
                <strong>Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:</strong> Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø³ÛŒØ³ØªÙ… (admin Ùˆ crystalah) Ø­ÙØ¸ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
            </div>

            <div class="form-group">
                <label class="form-label">Ø¨Ø±Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ØŒ Ø¹Ø¨Ø§Ø±Øª Ø²ÛŒØ± Ø±Ø§ ØªØ§ÛŒÙ¾ Ú©Ù†ÛŒØ¯:</label>
                <input type="text" id="resetConfirmText" class="form-control" placeholder="RESET SYSTEM FOR DELIVERY">
                <small class="form-text text-muted">Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…ÛŒÙ† Ø¹Ø¨Ø§Ø±Øª Ø±Ø§ Ø¨Ø§ Ø­Ø±ÙˆÙ Ø¨Ø²Ø±Ú¯ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ ØªØ§ÛŒÙ¾ Ú©Ù†ÛŒØ¯</small>
            </div>

            <div class="form-group">
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="confirmSystemReset">
                    <label class="custom-control-label" for="confirmSystemReset">
                        <strong>ØªØ£ÛŒÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ù…</strong> Ú©Ù‡ Ø§Ø² Ø­Ø°Ù Ú©Ø§Ù…Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ú¯Ø§Ù‡ Ù‡Ø³ØªÙ… Ùˆ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ø¢Ù† Ø±Ø§ Ù…ÛŒâ€ŒÙ¾Ø°ÛŒØ±Ù…
                    </label>
                </div>
            </div>

            <div class="form-group">
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="confirmBackupTaken">
                    <label class="custom-control-label" for="confirmBackupTaken">
                        <strong>ØªØ£ÛŒÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ù…</strong> Ú©Ù‡ Ø§Ø² Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ù‡Ù… Ø¨Ú©â€ŒØ¢Ù¾ Ú¯Ø±ÙØªÙ‡â€ŒØ§Ù…
                    </label>
                </div>
            </div>

            <button type="button" onclick="resetSystemForDelivery()" class="btn btn-danger btn-lg" style="width: 100%;" id="resetSystemBtn" disabled>
                <i class="fas fa-broom"></i>
                Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø§ÛŒ ØªØ­ÙˆÛŒÙ„
            </button>
        </div>
    </div>
</div>

<!-- Modal Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ -->
<div class="modal fade" id="restoreModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ú©â€ŒØ¢Ù¾</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="restoreFile" class="form-label">Ø§Ù†ØªØ®Ø§Ø¨ ÙØ§ÛŒÙ„ Ø¨Ú©â€ŒØ¢Ù¾</label>
                    <input type="file" id="restoreFile" class="form-control" accept=".sql">
                </div>
                <div class="alert alert-danger">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>ØªÙˆØ¬Ù‡:</strong> Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ú©â€ŒØ¢Ù¾ ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ¹Ù„ÛŒ Ø±Ø§ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø®ÙˆØ§Ù‡Ø¯ Ú©Ø±Ø¯.
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Ø§Ù†ØµØ±Ø§Ù</button>
                <button type="button" id="confirmRestore" class="btn btn-danger">Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ</button>
            </div>
        </div>
    </div>
</div>

<script>
// ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
document.getElementById('changePasswordForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const currentPassword = document.getElementById('currentPassword').value;
    const newPassword = document.getElementById('newPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    
    if (newPassword !== confirmPassword) {
        alert('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ Ùˆ ØªÚ©Ø±Ø§Ø± Ø¢Ù† ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯');
        return;
    }
    
    if (newPassword.length < 6) {
        alert('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ 6 Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø§Ø´Ø¯');
        return;
    }
    
    try {
        const response = await fetch('/settings/change-password', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                currentPassword,
                newPassword
            })
        });
        
        const result = await response.json();
        
        if (result.success) {
            alert('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØºÛŒÛŒØ± ÛŒØ§ÙØª');
            document.getElementById('changePasswordForm').reset();
            document.getElementById('strengthBar').className = 'strength-bar';
            document.getElementById('strengthText').textContent = '';
        } else {
            alert(result.message || 'Ø®Ø·Ø§ Ø¯Ø± ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±');
        }
    } catch (error) {
        alert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±');
    }
});

// Ø¨Ø±Ø±Ø³ÛŒ Ù‚Ø¯Ø±Øª Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
document.getElementById('newPassword').addEventListener('input', function(e) {
    const password = e.target.value;
    const strengthBar = document.getElementById('strengthBar');
    const strengthText = document.getElementById('strengthText');
    
    let strength = 0;
    let text = '';
    
    if (password.length >= 6) strength++;
    if (password.match(/[a-z]+/)) strength++;
    if (password.match(/[A-Z]+/)) strength++;
    if (password.match(/[0-9]+/)) strength++;
    if (password.match(/[^a-zA-Z0-9]+/)) strength++;
    
    strengthBar.className = 'strength-bar';
    
    if (strength < 2) {
        strengthBar.classList.add('strength-weak');
        text = 'Ø¶Ø¹ÛŒÙ';
    } else if (strength < 3) {
        strengthBar.classList.add('strength-fair');
        text = 'Ù…ØªÙˆØ³Ø·';
    } else if (strength < 4) {
        strengthBar.classList.add('strength-good');
        text = 'Ø®ÙˆØ¨';
    } else {
        strengthBar.classList.add('strength-strong');
        text = 'Ù‚ÙˆÛŒ';
    }
    
    strengthText.textContent = password.length > 0 ? `Ù‚Ø¯Ø±Øª Ø±Ù…Ø²: ${text}` : '';
});

// Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹ Ø¨Ú©â€ŒØ¢Ù¾
document.querySelectorAll('.backup-option').forEach(option => {
    option.addEventListener('click', function() {
        document.querySelectorAll('.backup-option').forEach(o => o.classList.remove('selected'));
        this.classList.add('selected');
    });
});

// Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ú©â€ŒØ¢Ù¾
document.getElementById('createBackupBtn').addEventListener('click', async function() {
    const backupType = document.querySelector('.backup-option.selected').dataset.type;
    const description = document.getElementById('backupDescription').value;
    
    const progressContainer = document.getElementById('backupProgress');
    const progressFill = document.getElementById('progressFill');
    const progressText = document.getElementById('progressText');
    
    progressContainer.style.display = 'block';
    this.disabled = true;
    
    try {
        const response = await fetch('/settings/backup/create', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                type: backupType,
                description
            })
        });
        
        const result = await response.json();
        
        if (result.success) {
            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                progressFill.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    progressText.textContent = 'Ø¨Ú©â€ŒØ¢Ù¾ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯';
                    setTimeout(() => {
                        progressContainer.style.display = 'none';
                        progressFill.style.width = '0%';
                        this.disabled = false;
                        document.getElementById('backupDescription').value = '';
                    }, 2000);
                }
            }, 200);
        } else {
            alert(result.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ú©â€ŒØ¢Ù¾');
            progressContainer.style.display = 'none';
            this.disabled = false;
        }
    } catch (error) {
        alert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±');
        progressContainer.style.display = 'none';
        this.disabled = false;
    }
});

// Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ú©â€ŒØ¢Ù¾
document.getElementById('restoreBtn').addEventListener('click', function() {
    $('#restoreModal').modal('show');
});

document.getElementById('confirmRestore').addEventListener('click', async function() {
    const fileInput = document.getElementById('restoreFile');
    
    if (!fileInput.files[0]) {
        alert('Ù„Ø·ÙØ§Ù‹ ÙØ§ÛŒÙ„ Ø¨Ú©â€ŒØ¢Ù¾ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
        return;
    }
    
    const formData = new FormData();
    formData.append('backupFile', fileInput.files[0]);
    
    try {
        const response = await fetch('/settings/backup/restore', {
            method: 'POST',
            body: formData
        });
        
        const result = await response.json();
        
        if (result.success) {
            alert('Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯');
            $('#restoreModal').modal('hide');
            location.reload();
        } else {
            alert(result.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ');
        }
    } catch (error) {
        alert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±');
    }
});

// Security & Monitoring Functions
function saveSecuritySettings() {
    const sessionTimeout = document.getElementById('sessionTimeout').value;
    const autoBackupInterval = document.getElementById('autoBackupInterval').value;
    const maxBackups = document.getElementById('maxBackups').value;

    const settings = {
        sessionTimeout,
        autoBackupInterval,
        maxBackups
    };

    fetch('/settings/security', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(settings)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showAlert('success', 'ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
        } else {
            showAlert('error', data.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª');
        }
    })
    .catch(error => {
        showAlert('error', 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±');
    });
}

function clearSystemCache() {
    if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ø´ Ø³ÛŒØ³ØªÙ… Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')) {
        fetch('/settings/clear-cache', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showAlert('success', 'Ú©Ø´ Ø³ÛŒØ³ØªÙ… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù¾Ø§Ú© Ø´Ø¯');
            } else {
                showAlert('error', data.message || 'Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ø´');
            }
        });
    }
}

function checkSystemHealth() {
    showAlert('info', 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…...');
    
    fetch('/settings/system-health')
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            let message = `âœ… Ø³ÛŒØ³ØªÙ… Ø³Ø§Ù„Ù… Ø§Ø³Øª\nğŸ“Š Ø¯ÛŒØªØ§Ø¨ÛŒØ³: ${data.dbStatus}\nğŸ’¾ Ø­Ø¬Ù…: ${data.dbSize}\nâš¡ Ø¹Ù…Ù„Ú©Ø±Ø¯: ${data.performance}`;
            showAlert('success', message);
            
            // Update UI
            document.getElementById('dbStatus').textContent = data.dbStatus;
            document.getElementById('dbSize').textContent = data.dbSize;
        } else {
            showAlert('error', data.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ Ø³ÛŒØ³ØªÙ…');
        }
    });
}

function optimizeDatabase() {
    if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ\nØ§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª Ù…Ù…Ú©Ù† Ø§Ø³Øª Ú†Ù†Ø¯ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø·ÙˆÙ„ Ø¨Ú©Ø´Ø¯.')) {
        showAlert('info', 'Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…...');
        
        fetch('/settings/optimize-db', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showAlert('success', `Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯\nğŸ“ˆ Ø¨Ù‡Ø¨ÙˆØ¯: ${data.improvement}`);
            } else {
                showAlert('error', data.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ');
            }
        });
    }
}

// System Reset Functions
function checkResetForm() {
    const confirmText = document.getElementById('resetConfirmText').value;
    const confirmReset = document.getElementById('confirmSystemReset').checked;
    const confirmBackup = document.getElementById('confirmBackupTaken').checked;
    const resetBtn = document.getElementById('resetSystemBtn');
    
    if (confirmText === 'RESET SYSTEM FOR DELIVERY' && confirmReset && confirmBackup) {
        resetBtn.disabled = false;
        resetBtn.style.background = 'linear-gradient(135deg, #dc3545, #e83e8c)';
    } else {
        resetBtn.disabled = true;
        resetBtn.style.background = '#6c757d';
    }
}

function resetSystemForDelivery() {
    if (!confirm('Ø¢ÛŒØ§ Ø§Ø² Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ… Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ\n\nØ§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª Ù‚Ø§Ø¨Ù„ Ø¨Ø±Ú¯Ø´Øª Ù†ÛŒØ³Øª!\n\nØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ Ø¬Ø² Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø­Ø°Ù Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.')) {
        return;
    }
    
    if (!confirm('Ø¢Ø®Ø±ÛŒÙ† Ù‡Ø´Ø¯Ø§Ø±!\n\nØ¢ÛŒØ§ ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ\n\nØ§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ø±Ø§ÛŒ ØªØ­ÙˆÛŒÙ„ Ø³ÛŒØ³ØªÙ… Ø®Ø§Ù… Ø¨Ù‡ Ù…Ø´ØªØ±ÛŒ Ø§Ø³Øª.')) {
        return;
    }
    
    const resetBtn = document.getElementById('resetSystemBtn');
    const originalText = resetBtn.innerHTML;
    resetBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ...';
    resetBtn.disabled = true;
    
    fetch('/settings/reset-system-for-delivery', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            confirmText: document.getElementById('resetConfirmText').value
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert(`Ø³ÛŒØ³ØªÙ… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯!\n\nØ¢Ù…Ø§Ø± Ø¹Ù…Ù„ÛŒØ§Øª:\n${data.summary}`);
            
            // Reset form
            document.getElementById('resetConfirmText').value = '';
            document.getElementById('confirmSystemReset').checked = false;
            document.getElementById('confirmBackupTaken').checked = false;
            
            // Refresh page after 2 seconds
            setTimeout(() => {
                window.location.reload();
            }, 2000);
        } else {
            alert('Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø³ÛŒØ³ØªÙ…:\n' + data.message);
        }
    })
    .catch(error => {
        alert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±');
        console.error('Error:', error);
    })
    .finally(() => {
        resetBtn.innerHTML = originalText;
        resetBtn.disabled = false;
    });
}

// Load system info on page load
document.addEventListener('DOMContentLoaded', function() {
    // Setup reset form validation
    document.getElementById('resetConfirmText').addEventListener('input', checkResetForm);
    document.getElementById('confirmSystemReset').addEventListener('change', checkResetForm);
    document.getElementById('confirmBackupTaken').addEventListener('change', checkResetForm);
    
    // Load last backup info
    fetch('/settings/last-backup-info')
    .then(response => response.json())
    .then(data => {
        if (data.success && data.lastBackup) {
            document.getElementById('lastBackup').textContent = `ğŸ“… ${data.lastBackup}`;
        } else {
            document.getElementById('lastBackup').textContent = 'âŒ Ù‡Ø±Ú¯Ø²';
        }
    });

    // Load database size
    fetch('/settings/db-size')
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            document.getElementById('dbSize').textContent = `ğŸ“Š ${data.size}`;
        }
    });
});
</script> 